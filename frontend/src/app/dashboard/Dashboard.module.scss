/* src/app/dashboard/Dashboard.module.scss */

/* SOLUÇÃO DO ERRO: 
  Tudo agora está "envelopado" pela classe .dashboardPage.
  Isso faz com que seletores de tag (como header, h1) sejam aceitos.
*/
.dashboardPage {
  padding: 2rem 3rem;
  background: #0f172a;
  min-height: 100vh;
  color: #e2e8f0;
  position: relative;
  /* Header estilizado dentro da classe pai */
  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    flex-wrap: wrap;
    gap: 1.5rem;

    .headerLeft {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    /* h1 estilizado dentro do header */
    h1 { 
      margin: 0; 
    }
    
    .healthBadge {
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: bold;
      
      &.HEALTHY { 
        background: #10b981; 
        color: #022c22; 
      }
      &.CRITICAL { 
        background: #ef4444; 
        color: #450a0a; 
      }
      &.WARNING {
         background: #f59e0b;
         color: #451a03;
      }
    }

    .loadingOverlay {
      position: absolute;   // ou fixed se quiser cobrir toda a tela
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(30, 41, 59, 0.6); // fundo semitransparente
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50; // acima de tudo
    }

    .spinner {
      border: 4px solid #334155;
      border-top: 4px solid #3b82f6; // cor animada
      border-radius: 50%;
      width: 36px;
      height: 36px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  }

  /* Cards de Resumo */
  .summaryCards {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    margin-bottom: 1.5rem;

    .card {
      background: #1e293b;
      padding: 1.5rem;
      border-radius: 12px;
      border: 1px solid #334155;

      span { 
        color: #94a3b8; 
        font-size: 0.9rem; 
      }
      
      h3 { 
        font-size: 1.8rem; 
        margin: 10px 0 0 0; 
      }
      
      &.income h3 { color: #10b981; }
      &.expense h3 { color: #ef4444; }
      
      /* Texto vermelho para saldo negativo */
      .textRed { color: #ef4444; } 
    }
  }

  /* Grid dos Gráficos */
  .chartsGrid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    margin-bottom: 1.5rem;

    .mainChart {
      grid-column: span 2;
    }

    .donutChart {
      grid-column: span 1;
    }
    
    .chartSection {
      background: #1e293b;
      border-radius: 12px;
      padding: 1rem;
      border: 1px solid #334155;
      
      h3 { 
        margin: 0 0 15px 10px; 
        font-size: 1rem; 
        color: #94a3b8; 
      }

      .loading, .noData {
        color: #64748b;
        text-align: center;
        padding: 20px;
        font-size: 0.9rem;
      }
    }
  }

  /* Grid Inferior (Formulário e Lista) */
  .gridLayout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    
    .leftCol { display: flex; flex-direction: column; }
    .rightCol { display: flex; flex-direction: column; }
  }
}

/* Responsividade (Media Query fora ou dentro, mas seletores devem ser puros) */
@media (max-width: 1000px) {
  /* Precisamos referenciar a classe pai novamente para manter a pureza */
  .dashboardPage {
    .gridLayout, 
    .chartsGrid, 
    .summaryCards { 
      grid-template-columns: 1fr; 
    }
    
    header { 
      flex-direction: column; 
      align-items: flex-start; 
    }
  }
}